# Programación Binaria
Conocemos que los microcontroladores y microprocesadores tienen en su arquitectura un "Contador de Programa (PC)" el cual es un bucle infinito, encargado de ejecutar cada byte del código objeto alojado en la ROM y cargado en memoria (RAM). La guía lo trasladara a los años 1960, época donde los programadores implementaban funcionalidad en base a códigos binarios que representaban una directiva y registro de datos, todo ello en base al manual de los chips.

## Directivas
Sea un microcontrolador o microprocesador, cada fabricante implementa sus propias directivas, una directiva es una palabra clave (keyword) que ordena realizar una acción. Para este proyecto usaremos 6 directivas para mostrar en pantalla un texto, además usaremos un virtualizador que arrancara una BIOS y este realizara el proceso de Boot para cargar un programa -por lo general es un Sistema Operativo (SO)- en nuestro caso será un programa que muestra un "Hello World!"

| Directiva | Acciones |
| ------ | ------ |
| mov ah | apunta a un registro, para llamar a una función |
| mov al | asigna un valor en memoria |
| int | llamada a funciones de la BIOS |

## Instrucciones
Las siguientes líneas de código "Assambly" son instrucciones que usan directivas en formato mnemotécnico, en combinación con números "Hexadecimales", estás líneas de código nos serviran para mostrar el texto en pantalla.

```sh
mov ah, 0x0e           carácter a mostrar
mov al, 'H'            código de carácter a mostrar 
int 0x0e               llamada a la BIOS, para servicio de vídeo e imprimir
```

Para alcanzar el objetivo de está guía, convertiremos las instrucciones en binario. En la tabla siguiente se convierte cada [directiva a su valor hexadecimal][Directivas-Hexadecimales] y reecordemos que la conversión se basa en `8-4-2-1` además, para los números hexadecimales cada dígito se representa en 4 bits.

| Directiva | Hexadecimal |
| ------ | ------ |
| mov ah | b4 |
| mov al | b0 |
| int | cd |

```sh
b4, 0e           10110100 00001110 
b0, 'H'          10110000 01001000
cd 0e            11001101 00010000
```

Ahora repetiremos estas instrucciones por cada carácter del texto "Hello World!"
```sh
b0, 'e'          10110000 01100101
cd 0e            11001101 00010000
```
```sh
b0, 'l'          10110000 01101100
cd 0e            11001101 00010000
```
```sh
b0, 'l'          10110000 01101100
cd 0e            11001101 00010000
```
```sh
b0, 'o'          10110000 01101111
cd 0e            11001101 00010000
```

## ASCII
Es un formato que representa cada caracter en [valores hexadecimales.][ASCII]
| Carácter | Hexadecimal |
| ------ | ------ |
| H | 48 |
| e | 65 |
| l | 6c |
| l | 6c |
| o | 6f |
| espacio | 20 |
| W | 57 |
| o | 6f |
| r | 72 |
| l | 6c |
| d | 64 |
| ! | 21 |

```sh
1011010000001110101100000100100011001101000100001011000001100101110011010001000010110000011011001100110100010000101100000110110011001101000100001011000001101111110011010001000010110000001000001100110100010000101100000101011111001101000100001011000001101111110011010001000010110000011100101100110100010000101100000110110011001101000100001011000001100100110011010001000010110000001000011100110100010000
```
Este es el resultado de la codificación en binario, ahora guardaremos nuestro programa binario en una unidad de almacenamiento virtual, dicha unidad la crearemos en binario en base al formato MBR.

## MBR
Es un [registro de arranque maestro][MBR], es el primer sector de un dispositivo de almacenamiento de datos. Lo que haremos es simular un dispositivo de hardware en software para que la BIOS cargue el primer sector de la unidad de almacenamiento.

| Tamaño | Función |
| ------ | ------ |
| 440 | Código binario ejecutable plano (datos) |
| 4 | Firma de identificación de disco |
| 2 | Opcional, reservado |
| 16 | Primera particion |
| 16 | Segunda particion |
| 16 | Tercera particion |
| 16 | Cuarta particion |
| 2 | Bytes de firma de "sector de arranque válido" (0x55, 0xAA) |

Lo que haremos es digitar 440 bytes con valor de cero, este es el área donde nuestros datos se guardan, ahora sumaremos los tamaños restantes de la tabla `4 + 2 + 16 + 16 + 16 + 16` el resultado es 70 bytes con valor uno, finalmente agregaremos dos bytes que son la firma de arranque:
```sh
0x55         01010101
0xAA         10101010
```

El resultado es el siguiente:

```sh
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110101010110101010
```
## Unida lógica
Nuestra unidad de almacenamiento a sido creada con exitosamente, a continuación agregaremos nuestro programa a nuestra unidad. Siga los pasos:

- Seleccione su programa
- Verifique cuantos caracteres tiene
- Debe contener 406 carácteres
- En su unidad lógica creada desde el primer caracter seleccione 406 carácteres
- Borre los carácteres selccionados
- Copie su programa y peguelo en la zona que borro en el paso anterior

El resultado siguiente es:

```sh
1011010000001110101100000100100011001101000100001011000001100101110011010001000010110000011011001100110100010000101100000110110011001101000100001011000001101111110011010001000010110000001000001100110100010000101100000101011111001101000100001011000001101111110011010001000010110000011100101100110100010000101100000110110011001101000100001011000001100100110011010001000010110000001000011100110100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110101010110101010
```

### HxD y CyberChef
Instale el software [HxD][HxD], mientras realiza la instalación vamos a convertir nuestra unidad lógica a formato hexadecimal, para que el programa HxD genere un archivo ".raw" que la BIOS pueda ejecutar.

Ingresemos a la página wbe [CyberChef][CyberChef], copie la unidad lógica y peguelo en CyberChef, seleccione "to Binary" y "to Hex" para convervir de binario a hexadecimal.

Abra el programa HxD y cree un nuevo archivo, seleccione la unidad lógica convertida a hexadecimal en CyberChef y peguelo en la nueva ventana de HxD, desde ahí guarde el archivo en formato "code.raw", recuerde la ruta donde esta guardado el archvio "code.raw"

## Qemu
Es un programa de virtualización que emula hardware, para permitir instalar sistemas operativos, es similar a VMware o Virtual Box, con la única diferencia que se ejecuta desde una consola. Instale [Qemu][Qemu] y siga la [guía de instalación.][Guia-Qemu]

## Arranque de Programa Binario
Finalmente ejecutemos nuestro programa en Qemu, abre la ventana donde se ubica el archivo "code.raw", desde ahí realize un click derecho y abra una terminal. Digite el siguiente comando:

```sh
qemu-system-x86_64.exe -drive format=raw,file=code.raw
```
[![Build Status](https://raw.githubusercontent.com/ezio-dev-web/repo-fork-test/refs/heads/main/qemu.png)](https://travis-ci.org/joemccann/dillinger)

Si el resultado es igual a la imagen, enhorabuena y muchas felicitaciones por el trabajo realizado, está acción te otorga una perspectiva más completa sobre la computación. El siguiente paso es comprender como funcionan los compiladores y apartir de ahí creaer lenguajes de programación. 

Como recompensa te compato un vídeo de una computadora [Zilog][Zilog] y también los [archivos del programa][Archivos] desarrollados en la guía. Exitos!


> "Las puertas lógicas más una arquitectura 
> generan una Computadora"
> `Christian Aviles`

**---**

[//]:()

   [Zilog]: <https://www.youtube.com/watch?v=mQEncg04plk>
   [Directivas-Hexadecimales]: <http://mlsite.net/8086/>
   [ASCII]: <https://www.commfront.com/pages/ascii-chart>
   [MBR]: <https://wiki.osdev.org/MBR_(x86)>
   [HxD]: <https://mh-nexus.de/en/hxd/>
   [CyberChef]: <https://gchq.github.io/CyberChef/>
   [Qemu]: <https://www.qemu.org/download/#windows>
   [Guia-Qemu]: <https://www.youtube.com/watch?v=_hQo0Iaf-zI>
   [Fuente]: <https://www.youtube.com/watch?v=2wrlXfiaL_8>
   [Zilog]: <https://www.youtube.com/watch?v=mQEncg04plk>
   [Archivos]: <https://github.com/ezio-dev-web/repo-fork-test/tree/main/Binary>
